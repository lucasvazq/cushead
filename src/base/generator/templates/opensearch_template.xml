{% include "complements/xml_declaration.xml" %}
<OpenSearchDescription xmlns:moz="http://www.mozilla.org/2006/browser/search/"
                       xmlns="http://a9.com/-/spec/opensearch/1.1/">
  {% if "title" in config %}
    <ShortName>{{ config.title }}</ShortName>
    <Description>Search {{ config.title }}</Description>
  {% endif %}
  <InputEncoding>UTF-8</InputEncoding>
  {% if "domain" in config %}
    {% set search_query = "search?q={searchTerms}+site%3A" + config.domain %}
    <Url method="get"
         type="text/html"
         template="{{ wse }}/{{ search_query }}"/>
  {% endif %}
  {% if "opensearch" in icons_config %}
    {% set icon = icons_config.opensearch %}
    {% set icon_name = icon.output_file_name %}
    {% set ext = icon.ext %}
    {% for size in icon.sizes_square %}
      {% set width = size %}
      {% set height = size %}
      {% set width_and_height = width|string + "x" + height|string %}
      {% set file_name = icon_name + "-" + width_and_height + ext %}
      <Image width="{{ width }}"
             height="{{ height }}"
             type="image/png">{{ static_url }}/{{ file_name }}</Image>
    {% endfor %}
  {% endif %}

</OpenSearchDescription>
